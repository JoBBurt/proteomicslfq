# nf-core/proteomicslfq: Output

This document describes the output produced by the pipeline.

## Pipeline overview

The pipeline is built using [Nextflow](https://www.nextflow.io/)
and processes data using the following steps:

1. (optional) Conversion of spectra data to indexedMzML: Using ThermoRawFileParser if Thermo Raw or using OpenMS' FileConverter if just an index is missing
1. (optional) Decoy database generation for the provided DB (fasta) with OpenMS
1. Database search with either MSGF+ or Comet through OpenMS adapters
1. Re-mapping potentially identified peptides to the database for consistency and error-checking (using OpenMS' PeptideIndexer)
1. (Intermediate score switching steps to use appropriate scores for the next step)
1. PSM rescoring using PSMFeatureExtractor and Percolator or a PeptideProphet-like distribution fitting approach in OpenMS
1. (Intermediate score switching steps to use appropriate scores for the next step)
1. PSM/Peptide-level FDR filtering
1. Protein inference and labelfree quantification based on MS1 feature detection, alignment and integration with OpenMS' ProteomicsLFQ

## Output

Output is by default written to the $NXF_WORKSPACE/results folder. You can change that with TODO
The output consists of the following folders:

results

* ids
  * [${infile}\*.idXML](#identifications)
* logs
  * ...
* msstats
  * [ComparisonPlot.pdf](#msstats-plots)
  * [VolcanoPlot.pdf](#msstats-plots)
  * [Heatmap.pdf](#msstats-plots)
  * [msstats\_results.csv](#msstats-table)
* pipeline\_info
  * [...](#nextflow-pipeline-info)
* proteomics\_lfq
  * [debug\_\*.idXML](#debug-output)
  * [out.consensusXML](#consenusxml)
  * [out.csv](#msstats-ready-quantity-table)
  * [out.mzTab](#mztab)
* ptxqc
  * [report\_v1.0.2\_out.yaml](#ptxqc-yaml-config)
  * [report\_v1.0.2\_out\_${hash}.html](#ptxqc-report)
  * [report\_v1.0.2\_out\_${hash}.pdf](#ptxqc-report)

### Nextflow pipeline info

Information about the execution and structure of the pipeline. If run with the corresponding nextflow parameters,
it can include things like a visual representation of the pipeline and/or a html report on the execution with
info on memory consumption, CPU usage and runtimes.

### ProteomicsLFQ main output

The `proteomics\_lfq` folder contains the output of the pipeline without any statistical postprocessing.
And is avaible in three different formats.

#### ConsensusXML

A consensusXML file (TODO link to schema or description) as the closest representation of the internal data
structures generated by OpenMS. Helpful for debugging and downstream processing with OpenMS tools.

#### MSstats-redy quantity table

A simple tsv file ready to be read by the OpenMStoMSstats function of the MSstats R package. It should hold
the same quantities as the consensusXML but rearranged in a "long" table format with additional information
about the experimental design used by MSstats.

#### mzTab

A complete mzTab file ready for submission to PRIDE. TODO link to mzTab schema/guide.

### MSstats output

The `msstats` folder contains MSstats' post-processed (e.g. imputation, outlier removal) quantities and statistical
measures of significance for different tested contrasts of the given experimental design. It also includes basic plots of these results.
The results will only be available if there was more than one condition.

#### MSstats table

See MSstats vignette.

#### MSstats plots

See MSstats vignette for Heatmap, VolcanoPlot and ComparisonPlot (per protein).

### PTXQC output

If activated, the `ptxqc` folder will contain the report of the PTXQC R package based on the mzTab output of proteomicsLFQ.
TODO link

#### PTXQC report

See PTXQC vignette. In the report itself the calculated and visualized QC metrics are actually quite extensively described already.

#### PTXQC yaml config

The default yaml config used to configure the structure of the QC report. In case you need to restructure, please edit this file and
re-run PTXQC manually.
